"use strict";import{useRef as y}from"react";import E from"../../common/util/lodashUtil";import h from"../../common/util/style";const k="span",m="k-ripple",$="ripple-effect",u=400;export default function x(p){const a=y(null);return{register:e=>{if(e.type.includes("key")){const n=e;if(n.key!=="Enter"&&n.key!==" "||e.target.getElementsByClassName(m)?.length>0)return}const t=E.uniqueId("k-ripple-");a.current=new Promise(n=>{const{x:o,y:c,width:r,height:s}=p.current.getBoundingClientRect(),{clientX:d=o+r/2,clientY:g=c+s/2}=e,i=Math.sqrt(r*r+s*s),l=document.createElement(k);l.classList.add(m),l.classList.add(t);const f={top:`${(g-c-i)/s*100}%`,left:`${(d-o-i)/r*100}%`,width:`${i*2}px`,height:`${i*2}px`,animation:`${u/1e3}s ${$} ease`};h.setStyleElement(l,f),p.current.append(l),setTimeout(()=>{n(t)},u)})},remove:()=>{a.current?.then(e=>{const t=p.current?.getElementsByClassName(e);t&&t[0]?.remove()})}}}
