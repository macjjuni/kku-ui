"use strict";import{jsx as i,jsxs as a}from"react/jsx-runtime";import{forwardRef as I,useCallback as t,useId as F,useImperativeHandle as K,useMemo as s,useRef as j,useState as _}from"react";import{initDisabled as E,initSize as $}from"../../../common/util/variation";import{KIcon as n}from"../../../components";const b=I(({...h},p)=>{const e={...h},o=j(null),r=`k-text-field-input-${F()}`,[d,x]=_(!1),[k,u]=_(!1);K(p,()=>({focus:()=>{o.current?.focus()},blur:()=>{o.current?.blur()},validate:()=>{},value:e.value}));const m=s(()=>{const l=[];return e.className&&l.push(e.className),$(l,"k-text-field",e.size),E(l,"k-text-field",e.disabled),e.labelDirection?l.push(`k-text-field--${e.labelDirection}`):l.push("k-text-field--column"),e.password&&l.push("k-text-field__input--password"),e.clearable&&l.push("k-text-field__input--clearable"),l.join(" ")},[e.className,e.labelDirection,e.password,e.clearable,e.disabled,e.size]),w=s(()=>{const l=e.style||{};return e.width&&(l.width=e.width),e.fullWidth&&(l.width="100%"),l},[e.width,e.fullWidth,e.style]),v=s(()=>{const l=[];return e.label?(k&&l.push("k-text-field__label__text--focus"),l.join(" ")):""},[e.label]),z=s(()=>e.size==="small"?14:16,[e.size]),c=s(()=>e.size==="small"?18:20,[e.size]),y=t(l=>{const S=l.target.value;e.onChange&&e.onChange(S)},[e.onChange]),C=t(()=>{e.label&&u(!0)},[e.label]),g=t(()=>{e.label&&u(!1)},[e.label]),N=t(()=>{e.clearable&&e.onChange?.("")},[e.clearable,e.onChange]),f=t(()=>{x(l=>!l)},[]),D=t(l=>{l.nativeEvent.isComposing||(l.key==="Enter"||l.key==="")&&e.onKeyDownEnter?.(l)},[e.onKeyDownEnter]);return a("div",{className:`k-text-field ${m}`,style:w,children:[e.label&&a("div",{className:"k-text-field__label__container",children:[a("label",{htmlFor:e.id?e.id:r,className:`k-text-field__label__text ${v}`,children:[e.label,e.required&&i("span",{className:"k-text-field__label__text__required",children:"*"})]}),e.rightAction&&!e.labelDirection&&i("div",{className:"k-text-field__label__right-action",children:e.rightAction})]}),a("div",{className:"k-text-field__input__container",children:[i("input",{id:e.id||r,ref:o,className:"k-text-field__input",type:e.password&&!d?"password":"input",value:e.value,onChange:y,onFocus:C,onBlur:g,onKeyDown:D,disabled:e.disabled,placeholder:e.placeholder,maxLength:e.maxLength}),e.password&&(d?i(n,{className:"k-text-field__icon k-text-field__password-icon",icon:"visibility_off",size:c,clickable:!0,onClick:f,disabled:e.disabled}):i(n,{className:"k-text-field__icon k-text-field__visibility-icon",icon:"visibility",size:c,clickable:!0,onClick:f,disabled:e.disabled})),e.clearable&&e.value&&i(n,{className:"k-text-field__icon k-text-field__clearable-icon",icon:"close",size:z,clickable:!0,onClick:N,disabled:e.disabled}),e.search&&i(n,{className:"k-text-field__icon k-text-field__search-icon",icon:"search",size:c,onClick:e?.onSearch})]})]})});b.displayName="KTextField";export default b;
