"use strict";import{jsx as o,jsxs as a}from"react/jsx-runtime";import{memo as q,useEffect as B,useMemo as c,useRef as p,useState as f}from"react";import{initSize as F}from"../../common/util/variation";import{KIcon as h}from"../../components";import{useCleanId as k}from"../../common/hook/useCleanId";const z=({...N})=>{const{id:x,className:r,size:t,children:I,summaryIconSize:m,summary:w,summaryIcon:e,style:g,width:i,open:C}={...N},[s,S]=f(!!C),l=p(null),u=p(null),[d,b]=f(0),_=k("k-accordion-summary"),j=k("k-accordion-content"),v=c(()=>{const n=[];return r&&n.push(r),F(n,"k-accordion",t),n.push(`k-accordion--${s?"open":"close"}`),n.join(" ")},[r,t]),K=()=>{const n=[];return s?n.push("k-accordion__summary__icon--open"):n.push("k-accordion__summary__icon--close"),n.join(" ")},D=c(()=>{const n={...g};return i&&(n.width=i),n},[i]),H=c(()=>({maxHeight:s?`${d}px`:0}),[s,d]),$=c(()=>t==="small"?16:18,[t]),A=()=>{l.current?.setAttribute("open","true")},R=()=>{b(u.current?.scrollHeight||0)},y=n=>{n?.preventDefault(),S(M=>!M)},E=n=>{n.preventDefault(),(n.key==="Enter"||n.key===" ")&&y()},O=c(()=>e?typeof e=="string"?o(h,{className:"k-accordion__summary__icon",icon:e,size:m}):e:null,[e,m]);return B(()=>{A(),R()},[]),a("details",{ref:l,id:x,className:`k-accordion ${v}`,open:!0,style:D,children:[a("summary",{role:"button",id:_,className:"k-accordion__summary",onClick:y,onKeyDown:E,tabIndex:0,children:[a("div",{className:"k-accordion__summary__container",children:[O,o("span",{className:"k-accordion__summary__text",children:w})]}),o("div",{className:"k-accordion__summary__icon__wrapper",children:o(h,{className:`k-accordion__summary__icon ${K()}`,icon:"keyboard_arrow_down",size:$})})]}),o("div",{ref:u,id:j,className:"k-accordion__content",style:H,"aria-labelledby":_,children:o("div",{className:"k-accordion__content__wrapper",children:I})})]})};z.displayName="KAccordion";export default q(z);
